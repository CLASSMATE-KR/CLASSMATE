// 문제 데이터 (파싱된 문제들)

export interface Problem {
  id: number
  title: string
  content: string
  options: string[]
  correctAnswer: number // 0-3 (①-④)
  subject: string
  difficulty: 'easy' | 'medium' | 'hard'
  category: string
}

// 문제 파싱 함수
export function parseProblemText(text: string): Problem[] {
  const problems: Problem[] = []
  const lines = text.split('\n').filter(line => line.trim())
  
  let currentCategory = ''
  
  for (const line of lines) {
    // 카테고리 감지
    if (line.includes('##')) {
      currentCategory = line.replace(/##\s*/, '').trim()
      continue
    }
    
    // 문제 번호 감지 (숫자. 로 시작)
    const problemMatch = line.match(/^(\d+)\.\s*(.+?)\s*=\s*\?\s*(.+)$/)
    if (problemMatch) {
      const problemNumber = parseInt(problemMatch[1])
      const questionText = problemMatch[2].trim()
      const optionsText = problemMatch[3].trim()
      
      // 선택지 파싱 (①, ②, ③, ④)
      const options: string[] = []
      const optionRegex = /[①②③④]\s*([^①②③④]+)/g
      let match
      while ((match = optionRegex.exec(optionsText)) !== null) {
        options.push(match[1].trim())
      }
      
      // 난이도 결정
      let difficulty: 'easy' | 'medium' | 'hard' = 'medium'
      if (currentCategory.includes('기초') || problemNumber <= 50) {
        difficulty = 'easy'
      } else if (problemNumber <= 150) {
        difficulty = 'medium'
      } else {
        difficulty = 'hard'
      }
      
      // 정답은 나중에 수동으로 설정 (임시로 0번)
      const correctAnswer = 0
      
      problems.push({
        id: problemNumber,
        title: `문제 ${problemNumber}`,
        content: `${questionText} = ?`,
        options: options,
        correctAnswer: correctAnswer,
        subject: '수학',
        difficulty: difficulty,
        category: currentCategory
      })
    }
  }
  
  return problems
}

// 제공된 문제 텍스트 (사용자가 제공한 전체 텍스트)
const problemsText = `# 수학 문제 300개 - 초등학교 수준

## 1-50: 사칙연산 기초

1. 15 + 27 = ? ① 40 ② 42 ③ 44 ④ 46
2. 83 - 29 = ? ① 52 ② 54 ③ 56 ④ 58
3. 456 + 238 = ? ① 684 ② 694 ③ 704 ④ 714
4. 500 - 167 = ? ① 323 ② 333 ③ 343 ④ 353
5. 1,234 + 5,678 = ? ① 6,902 ② 6,912 ③ 6,922 ④ 6,932
6. 48 + 35 + 22 = ? ① 95 ② 100 ③ 105 ④ 110
7. 700 - 456 = ? ① 234 ② 244 ③ 254 ④ 264
8. 89 + 76 = ? ① 155 ② 165 ③ 175 ④ 185
9. 1,000 - 789 = ? ① 201 ② 211 ③ 221 ④ 231
10. 345 + 345 = ? ① 680 ② 690 ③ 700 ④ 710
11. 7 × 8 = ? ① 54 ② 56 ③ 58 ④ 60
12. 9 × 6 = ? ① 52 ② 54 ③ 56 ④ 58
13. 12 × 5 = ? ① 50 ② 55 ③ 60 ④ 65
14. 48 ÷ 6 = ? ① 6 ② 7 ③ 8 ④ 9
15. 63 ÷ 9 = ? ① 6 ② 7 ③ 8 ④ 9
16. 15 × 4 = ? ① 50 ② 55 ③ 60 ④ 65
17. 72 ÷ 8 = ? ① 7 ② 8 ③ 9 ④ 10
18. 11 × 11 = ? ① 111 ② 121 ③ 131 ④ 141
19. 144 ÷ 12 = ? ① 10 ② 11 ③ 12 ④ 13
20. 25 × 4 = ? ① 90 ② 95 ③ 100 ④ 105
21. 13 × 7 = ? ① 81 ② 86 ③ 91 ④ 96
22. 96 ÷ 8 = ? ① 10 ② 11 ③ 12 ④ 13
23. 17 × 3 = ? ① 48 ② 51 ③ 54 ④ 57
24. 84 ÷ 7 = ? ① 10 ② 11 ③ 12 ④ 13
25. 19 × 5 = ? ① 85 ② 90 ③ 95 ④ 100
26. 234 + 567 = ? ① 791 ② 801 ③ 811 ④ 821
27. 1,500 - 678 = ? ① 812 ② 822 ③ 832 ④ 842
28. 23 × 6 = ? ① 128 ② 133 ③ 138 ④ 143
29. 135 ÷ 9 = ? ① 13 ② 14 ③ 15 ④ 16
30. 678 + 234 = ? ① 902 ② 912 ③ 922 ④ 932
31. 2,000 - 1,456 = ? ① 534 ② 544 ③ 554 ④ 564
32. 27 × 8 = ? ① 206 ② 216 ③ 226 ④ 236
33. 168 ÷ 12 = ? ① 12 ② 13 ③ 14 ④ 15
34. 89 + 123 = ? ① 202 ② 212 ③ 222 ④ 232
35. 456 - 189 = ? ① 257 ② 267 ③ 277 ④ 287
36. 34 × 5 = ? ① 160 ② 165 ③ 170 ④ 175
37. 225 ÷ 15 = ? ① 13 ② 14 ③ 15 ④ 16
38. 987 + 654 = ? ① 1,631 ② 1,641 ③ 1,651 ④ 1,661
39. 3,000 - 1,789 = ? ① 1,201 ② 1,211 ③ 1,221 ④ 1,231
40. 45 × 9 = ? ① 395 ② 405 ③ 415 ④ 425
41. 192 ÷ 16 = ? ① 10 ② 11 ③ 12 ④ 13
42. 765 + 432 = ? ① 1,187 ② 1,197 ③ 1,207 ④ 1,217
43. 5,000 - 2,345 = ? ① 2,645 ② 2,655 ③ 2,665 ④ 2,675
44. 56 × 7 = ? ① 382 ② 392 ③ 402 ④ 412
45. 288 ÷ 18 = ? ① 14 ② 15 ③ 16 ④ 17
46. 1,234 + 4,567 = ? ① 5,791 ② 5,801 ③ 5,811 ④ 5,821
47. 8,000 - 3,456 = ? ① 4,534 ② 4,544 ③ 4,554 ④ 4,564
48. 67 × 8 = ? ① 526 ② 536 ③ 546 ④ 556
49. 336 ÷ 21 = ? ① 14 ② 15 ③ 16 ④ 17
50. 2,345 + 6,789 = ? ① 9,124 ② 9,134 ③ 9,144 ④ 9,154

## 51-100: 분수와 소수

51. 1/2 + 1/4 = ? ① 1/4 ② 1/2 ③ 3/4 ④ 1
52. 3/5 - 1/5 = ? ① 1/5 ② 2/5 ③ 3/5 ④ 4/5
53. 1/3 + 1/6 = ? ① 1/6 ② 1/3 ③ 1/2 ④ 2/3
54. 2/3 × 3/4 = ? ① 1/2 ② 2/3 ③ 3/4 ④ 1
55. 1/2 ÷ 1/4 = ? ① 1 ② 2 ③ 3 ④ 4
56. 3/4 + 1/8 = ? ① 5/8 ② 3/4 ③ 7/8 ④ 1
57. 5/6 - 1/3 = ? ① 1/6 ② 1/3 ③ 1/2 ④ 2/3
58. 2/5 × 5/8 = ? ① 1/4 ② 1/3 ③ 1/2 ④ 2/3
59. 3/4 ÷ 3/8 = ? ① 1 ② 2 ③ 3 ④ 4
60. 1/2 + 1/3 + 1/6 = ? ① 2/3 ② 5/6 ③ 1 ④ 7/6
61. 0.5 + 0.3 = ? ① 0.7 ② 0.8 ③ 0.9 ④ 1.0
62. 1.2 - 0.7 = ? ① 0.3 ② 0.4 ③ 0.5 ④ 0.6
63. 0.4 × 5 = ? ① 1.5 ② 2.0 ③ 2.5 ④ 3.0
64. 1.5 ÷ 3 = ? ① 0.3 ② 0.4 ③ 0.5 ④ 0.6
65. 2.5 + 3.7 = ? ① 5.2 ② 6.0 ③ 6.2 ④ 6.4
66. 5.6 - 2.9 = ? ① 2.5 ② 2.7 ③ 2.9 ④ 3.1
67. 0.8 × 6 = ? ① 4.2 ② 4.6 ③ 4.8 ④ 5.0
68. 3.6 ÷ 4 = ? ① 0.7 ② 0.8 ③ 0.9 ④ 1.0
69. 1.25 + 2.75 = ? ① 3.5 ② 4.0 ③ 4.5 ④ 5.0
70. 10 - 3.6 = ? ① 6.2 ② 6.4 ③ 6.6 ④ 6.8
71. 2/3 + 1/4 = ? ① 5/12 ② 7/12 ③ 9/12 ④ 11/12
72. 4/5 - 1/2 = ? ① 1/10 ② 2/10 ③ 3/10 ④ 4/10
73. 3/7 × 2/3 = ? ① 2/7 ② 6/21 ③ 2/21 ④ 1/3
74. 5/6 ÷ 1/3 = ? ① 5/2 ② 2 ③ 3 ④ 5/18
75. 1/4 + 2/5 = ? ① 9/20 ② 11/20 ③ 13/20 ④ 15/20
76. 0.6 + 0.9 = ? ① 1.3 ② 1.4 ③ 1.5 ④ 1.6
77. 4.8 - 1.9 = ? ① 2.7 ② 2.8 ③ 2.9 ④ 3.0
78. 1.2 × 5 = ? ① 5.5 ② 6.0 ③ 6.5 ④ 7.0
79. 8.4 ÷ 7 = ? ① 1.1 ② 1.2 ③ 1.3 ④ 1.4
80. 3.5 + 4.8 = ? ① 8.1 ② 8.2 ③ 8.3 ④ 8.4
81. 7/8 - 1/4 = ? ① 3/8 ② 4/8 ③ 5/8 ④ 6/8
82. 3/5 × 5/9 = ? ① 1/3 ② 2/3 ③ 1/5 ④ 3/15
83. 4/7 ÷ 2/7 = ? ① 1 ② 2 ③ 3 ④ 4
84. 1/8 + 3/8 = ? ① 1/4 ② 1/2 ③ 3/4 ④ 1
85. 0.7 × 8 = ? ① 5.2 ② 5.4 ③ 5.6 ④ 5.8
86. 9.6 ÷ 8 = ? ① 1.1 ② 1.2 ③ 1.3 ④ 1.4
87. 2.4 + 5.9 = ? ① 8.1 ② 8.2 ③ 8.3 ④ 8.4
88. 12 - 4.7 = ? ① 7.1 ② 7.2 ③ 7.3 ④ 7.4
89. 5/12 + 1/4 = ? ① 7/12 ② 8/12 ③ 9/12 ④ 10/12
90. 3/4 - 1/3 = ? ① 3/12 ② 4/12 ③ 5/12 ④ 6/12
91. 2/9 × 3/4 = ? ① 1/6 ② 1/8 ③ 1/12 ④ 1/3
92. 7/10 ÷ 1/5 = ? ① 5/2 ② 7/2 ③ 3 ④ 4
93. 1.5 × 4 = ? ① 5.5 ② 6.0 ③ 6.5 ④ 7.0
94. 10.5 ÷ 5 = ? ① 2.0 ② 2.1 ③ 2.2 ④ 2.3
95. 3.7 + 6.8 = ? ① 10.3 ② 10.4 ③ 10.5 ④ 10.6
96. 15 - 7.3 = ? ① 7.5 ② 7.6 ③ 7.7 ④ 7.8
97. 5/6 + 1/3 = ? ① 1 ② 7/6 ③ 4/3 ④ 3/2
98. 7/8 - 3/8 = ? ① 1/2 ② 1/4 ③ 1/8 ④ 3/4
99. 0.9 × 7 = ? ① 6.1 ② 6.2 ③ 6.3 ④ 6.4
100. 14.4 ÷ 6 = ? ① 2.3 ② 2.4 ③ 2.5 ④ 2.6`

// 문제 파싱 및 저장
export const parsedProblems = parseProblemText(problemsText)

// 문제 ID로 문제 찾기
export function getProblemById(id: number): Problem | undefined {
  return parsedProblems.find(p => p.id === id)
}

// 모든 문제 가져오기
export function getAllProblems(): Problem[] {
  return parsedProblems
}
