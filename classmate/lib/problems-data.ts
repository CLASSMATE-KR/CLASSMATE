// 문제 데이터 (파싱된 문제들)

export interface Problem {
  id: number
  title: string
  content: string
  options: string[]
  correctAnswer: number // 0-3 (①-④)
  subject: string
  difficulty: 'easy' | 'medium' | 'hard'
  category: string
}

// 답안 파싱 함수
function parseAnswers(answerText: string): Map<number, number> {
  const answerMap = new Map<number, number>()
  const lines = answerText.split('\n').filter(line => line.trim())
  
  for (const line of lines) {
    // 답안 형식: "1. ② 42" 또는 "1. ②"
    const answerMatch = line.match(/^(\d+)\.\s*([①②③④])/)
    if (answerMatch) {
      const problemNumber = parseInt(answerMatch[1])
      const answerChar = answerMatch[2]
      // ①=0, ②=1, ③=2, ④=3
      const answerIndex = answerChar.charCodeAt(0) - 9312
      answerMap.set(problemNumber, answerIndex)
    }
  }
  
  return answerMap
}

// 문제 파싱 함수
export function parseProblemText(text: string, answerText?: string): Problem[] {
  const problems: Problem[] = []
  const lines = text.split('\n').filter(line => line.trim())
  
  // 답안 파싱
  const answerMap = answerText ? parseAnswers(answerText) : new Map<number, number>()
  
  let currentCategory = ''
  
  for (const line of lines) {
    // 카테고리 감지
    if (line.includes('##')) {
      currentCategory = line.replace(/##\s*/, '').trim()
      continue
    }
    
    // 문제 번호 감지 (숫자. 로 시작)
    // "=" 또는 "?"로 끝나는 문제 형식 지원
    const problemMatch = line.match(/^(\d+)\.\s*(.+?)\s*(?:=\s*)?\?\s*(.+)$/)
    if (problemMatch) {
      const problemNumber = parseInt(problemMatch[1])
      const questionText = problemMatch[2].trim()
      const optionsText = problemMatch[3].trim()
      
      // 선택지 파싱 (①, ②, ③, ④)
      const options: string[] = []
      const optionRegex = /[①②③④]\s*([^①②③④]+)/g
      let match
      while ((match = optionRegex.exec(optionsText)) !== null) {
        options.push(match[1].trim())
      }
      
      // 난이도 결정
      let difficulty: 'easy' | 'medium' | 'hard' = 'medium'
      if (currentCategory.includes('기초') || currentCategory.includes('덧셈') || currentCategory.includes('뺄셈') || problemNumber <= 30) {
        difficulty = 'easy'
      } else if (problemNumber <= 90) {
        difficulty = 'medium'
      } else {
        difficulty = 'hard'
      }
      
      // 정답 가져오기 (답안 맵에서 찾기, 없으면 0)
      const correctAnswer = answerMap.get(problemNumber) ?? 0
      
      // 문제 내용 형식 결정 (수식이면 "=" 포함, 아니면 "?"만)
      const content = questionText.includes('=') 
        ? `${questionText} = ?` 
        : `${questionText}?`
      
      problems.push({
        id: problemNumber,
        title: `문제 ${problemNumber}`,
        content: content,
        options: options,
        correctAnswer: correctAnswer,
        subject: '수학',
        difficulty: difficulty,
        category: currentCategory
      })
    }
  }
  
  return problems
}

// 제공된 문제 텍스트
const problemsText = `# 초등학교 수학 문제 150개 (문제편)

## 1-30: 덧셈과 뺄셈

1. 15 + 27 = ? ① 40 ② 42 ③ 44 ④ 46

2. 83 - 29 = ? ① 52 ② 54 ③ 56 ④ 58

3. 456 + 238 = ? ① 684 ② 694 ③ 704 ④ 714

4. 500 - 167 = ? ① 323 ② 333 ③ 343 ④ 353

5. 1,234 + 5,678 = ? ① 6,902 ② 6,912 ③ 6,922 ④ 6,932

6. 48 + 35 + 22 = ? ① 95 ② 100 ③ 105 ④ 110

7. 700 - 456 = ? ① 234 ② 244 ③ 254 ④ 264

8. 89 + 76 = ? ① 155 ② 165 ③ 175 ④ 185

9. 1,000 - 789 = ? ① 201 ② 211 ③ 221 ④ 231

10. 345 + 345 = ? ① 680 ② 690 ③ 700 ④ 710

11. 234 + 567 = ? ① 791 ② 801 ③ 811 ④ 821

12. 1,500 - 678 = ? ① 812 ② 822 ③ 832 ④ 842

13. 89 + 123 = ? ① 202 ② 212 ③ 222 ④ 232

14. 456 - 189 = ? ① 257 ② 267 ③ 277 ④ 287

15. 987 + 654 = ? ① 1,631 ② 1,641 ③ 1,651 ④ 1,661

16. 3,000 - 1,789 = ? ① 1,201 ② 1,211 ③ 1,221 ④ 1,231

17. 765 + 432 = ? ① 1,187 ② 1,197 ③ 1,207 ④ 1,217

18. 5,000 - 2,345 = ? ① 2,645 ② 2,655 ③ 2,665 ④ 2,675

19. 1,234 + 4,567 = ? ① 5,791 ② 5,801 ③ 5,811 ④ 5,821

20. 8,000 - 3,456 = ? ① 4,534 ② 4,544 ③ 4,554 ④ 4,564

21. 2,345 + 6,789 = ? ① 9,124 ② 9,134 ③ 9,144 ④ 9,154

22. 678 + 321 = ? ① 989 ② 999 ③ 1,009 ④ 1,019

23. 2,400 - 1,567 = ? ① 823 ② 833 ③ 843 ④ 853

24. 543 + 876 = ? ① 1,409 ② 1,419 ③ 1,429 ④ 1,439

25. 6,000 - 2,789 = ? ① 3,201 ② 3,211 ③ 3,221 ④ 3,231

26. 4,567 + 3,210 = ? ① 7,767 ② 7,777 ③ 7,787 ④ 7,797

27. 9,000 - 4,321 = ? ① 4,669 ② 4,679 ③ 4,689 ④ 4,699

28. 1,111 + 2,222 = ? ① 3,323 ② 3,333 ③ 3,343 ④ 3,353

29. 7,500 - 3,678 = ? ① 3,812 ② 3,822 ③ 3,832 ④ 3,842

30. 5,678 + 4,321 = ? ① 9,989 ② 9,999 ③ 10,009 ④ 10,019

## 31-60: 곱셈과 나눗셈

31. 7 × 8 = ? ① 54 ② 56 ③ 58 ④ 60

32. 9 × 6 = ? ① 52 ② 54 ③ 56 ④ 58

33. 12 × 5 = ? ① 50 ② 55 ③ 60 ④ 65

34. 48 ÷ 6 = ? ① 6 ② 7 ③ 8 ④ 9

35. 63 ÷ 9 = ? ① 6 ② 7 ③ 8 ④ 9

36. 15 × 4 = ? ① 50 ② 55 ③ 60 ④ 65

37. 72 ÷ 8 = ? ① 7 ② 8 ③ 9 ④ 10

38. 11 × 11 = ? ① 111 ② 121 ③ 131 ④ 141

39. 144 ÷ 12 = ? ① 10 ② 11 ③ 12 ④ 13

40. 25 × 4 = ? ① 90 ② 95 ③ 100 ④ 105

41. 13 × 7 = ? ① 81 ② 86 ③ 91 ④ 96

42. 96 ÷ 8 = ? ① 10 ② 11 ③ 12 ④ 13

43. 17 × 3 = ? ① 48 ② 51 ③ 54 ④ 57

44. 84 ÷ 7 = ? ① 10 ② 11 ③ 12 ④ 13

45. 19 × 5 = ? ① 85 ② 90 ③ 95 ④ 100

46. 23 × 6 = ? ① 128 ② 133 ③ 138 ④ 143

47. 135 ÷ 9 = ? ① 13 ② 14 ③ 15 ④ 16

48. 27 × 8 = ? ① 206 ② 216 ③ 226 ④ 236

49. 168 ÷ 12 = ? ① 12 ② 13 ③ 14 ④ 15

50. 34 × 5 = ? ① 160 ② 165 ③ 170 ④ 175

51. 225 ÷ 15 = ? ① 13 ② 14 ③ 15 ④ 16

52. 45 × 9 = ? ① 395 ② 405 ③ 415 ④ 425

53. 192 ÷ 16 = ? ① 10 ② 11 ③ 12 ④ 13

54. 56 × 7 = ? ① 382 ② 392 ③ 402 ④ 412

55. 288 ÷ 18 = ? ① 14 ② 15 ③ 16 ④ 17

56. 67 × 8 = ? ① 526 ② 536 ③ 546 ④ 556

57. 336 ÷ 21 = ? ① 14 ② 15 ③ 16 ④ 17

58. 14 × 6 = ? ① 78 ② 82 ③ 84 ④ 88

59. 240 ÷ 20 = ? ① 10 ② 11 ③ 12 ④ 13

60. 18 × 9 = ? ① 152 ② 162 ③ 172 ④ 182

## 61-90: 분수와 소수

61. 1/2 + 1/4 = ? ① 1/4 ② 1/2 ③ 3/4 ④ 1

62. 3/5 - 1/5 = ? ① 1/5 ② 2/5 ③ 3/5 ④ 4/5

63. 1/3 + 1/6 = ? ① 1/6 ② 1/3 ③ 1/2 ④ 2/3

64. 2/3 × 3/4 = ? ① 1/2 ② 2/3 ③ 3/4 ④ 1

65. 1/2 ÷ 1/4 = ? ① 1 ② 2 ③ 3 ④ 4

66. 3/4 + 1/8 = ? ① 5/8 ② 3/4 ③ 7/8 ④ 1

67. 5/6 - 1/3 = ? ① 1/6 ② 1/3 ③ 1/2 ④ 2/3

68. 2/5 × 5/8 = ? ① 1/4 ② 1/3 ③ 1/2 ④ 2/3

69. 3/4 ÷ 3/8 = ? ① 1 ② 2 ③ 3 ④ 4

70. 1/2 + 1/3 + 1/6 = ? ① 2/3 ② 5/6 ③ 1 ④ 7/6

71. 0.5 + 0.3 = ? ① 0.7 ② 0.8 ③ 0.9 ④ 1.0

72. 1.2 - 0.7 = ? ① 0.3 ② 0.4 ③ 0.5 ④ 0.6

73. 0.4 × 5 = ? ① 1.5 ② 2.0 ③ 2.5 ④ 3.0

74. 1.5 ÷ 3 = ? ① 0.3 ② 0.4 ③ 0.5 ④ 0.6

75. 2.5 + 3.7 = ? ① 5.2 ② 6.0 ③ 6.2 ④ 6.4

76. 5.6 - 2.9 = ? ① 2.5 ② 2.7 ③ 2.9 ④ 3.1

77. 0.8 × 6 = ? ① 4.2 ② 4.6 ③ 4.8 ④ 5.0

78. 3.6 ÷ 4 = ? ① 0.7 ② 0.8 ③ 0.9 ④ 1.0

79. 1.25 + 2.75 = ? ① 3.5 ② 4.0 ③ 4.5 ④ 5.0

80. 10 - 3.6 = ? ① 6.2 ② 6.4 ③ 6.6 ④ 6.8

81. 2/3 + 1/4 = ? ① 5/12 ② 7/12 ③ 9/12 ④ 11/12

82. 4/5 - 1/2 = ? ① 1/10 ② 2/10 ③ 3/10 ④ 4/10

83. 3/7 × 2/3 = ? ① 2/7 ② 6/21 ③ 2/21 ④ 1/3

84. 5/6 ÷ 1/3 = ? ① 5/2 ② 2 ③ 3 ④ 5/18

85. 0.6 + 0.9 = ? ① 1.3 ② 1.4 ③ 1.5 ④ 1.6

86. 4.8 - 1.9 = ? ① 2.7 ② 2.8 ③ 2.9 ④ 3.0

87. 1.2 × 5 = ? ① 5.5 ② 6.0 ③ 6.5 ④ 7.0

88. 8.4 ÷ 7 = ? ① 1.1 ② 1.2 ③ 1.3 ④ 1.4

89. 3.5 + 4.8 = ? ① 8.1 ② 8.2 ③ 8.3 ④ 8.4

90. 7/8 - 1/4 = ? ① 3/8 ② 4/8 ③ 5/8 ④ 6/8

## 91-120: 도형과 측정

91. 정사각형의 한 변이 5cm일 때, 둘레는? ① 15cm ② 20cm ③ 25cm ④ 30cm

92. 직사각형의 가로 8cm, 세로 5cm일 때 넓이는? ① 30cm² ② 35cm² ③ 40cm² ④ 45cm²

93. 삼각형의 밑변 6cm, 높이 4cm일 때 넓이는? ① 10cm² ② 12cm² ③ 14cm² ④ 16cm²

94. 원의 반지름이 7cm일 때, 지름은? ① 7cm ② 14cm ③ 21cm ④ 28cm

95. 정육면체의 한 모서리가 3cm일 때, 모서리는 모두 몇 개? ① 6개 ② 8개 ③ 10개 ④ 12개

96. 한 변이 6cm인 정사각형의 넓이는? ① 24cm² ② 30cm² ③ 36cm² ④ 42cm²

97. 가로 10cm, 세로 6cm인 직사각형의 넓이는? ① 50cm² ② 55cm² ③ 60cm² ④ 65cm²

98. 밑변 8cm, 높이 5cm인 삼각형의 넓이는? ① 15cm² ② 20cm² ③ 25cm² ④ 30cm²

99. 한 변이 5cm인 정육면체의 부피는? ① 100cm³ ② 115cm³ ③ 125cm³ ④ 135cm³

100. 가로 4cm, 세로 3cm, 높이 2cm인 직육면체의 부피는? ① 20cm³ ② 22cm³ ③ 24cm³ ④ 26cm³

101. 반지름이 5cm인 원의 넓이는? (π=3.14) ① 68.5cm² ② 73.5cm² ③ 78.5cm² ④ 83.5cm²

102. 한 변이 8cm인 정사각형의 둘레는? ① 28cm ② 30cm ③ 32cm ④ 34cm

103. 가로 9cm, 세로 7cm인 직사각형의 둘레는? ① 30cm ② 32cm ③ 34cm ④ 36cm

104. 한 변이 10cm인 정삼각형의 둘레는? ① 25cm ② 28cm ③ 30cm ④ 32cm

105. 반지름이 10cm인 원의 원주는? (π=3.14) ① 31.4cm ② 62.8cm ③ 94.2cm ④ 125.6cm

106. 한 변이 7cm인 정사각형의 넓이는? ① 42cm² ② 45cm² ③ 49cm² ④ 52cm²

107. 가로 12cm, 세로 8cm인 직사각형의 넓이는? ① 88cm² ② 92cm² ③ 96cm² ④ 100cm²

108. 밑변 10cm, 높이 6cm인 삼각형의 넓이는? ① 25cm² ② 30cm² ③ 35cm² ④ 40cm²

109. 한 변이 4cm인 정육면체의 부피는? ① 56cm³ ② 60cm³ ③ 64cm³ ④ 68cm³

110. 가로 6cm, 세로 5cm, 높이 4cm인 직육면체의 부피는? ① 110cm³ ② 115cm³ ③ 120cm³ ④ 125cm³

111. 반지름이 3cm인 원의 넓이는? (π=3.14) ① 26.13cm² ② 28.26cm² ③ 30.39cm² ④ 32.52cm²

112. 한 변이 9cm인 정사각형의 둘레는? ① 32cm ② 34cm ③ 36cm ④ 38cm

113. 가로 15cm, 세로 10cm인 직사각형의 둘레는? ① 45cm ② 48cm ③ 50cm ④ 52cm

114. 반지름이 14cm인 원의 원주는? (π=3.14) ① 82.96cm ② 87.92cm ③ 92.88cm ④ 97.84cm

115. 한 변이 11cm인 정사각형의 넓이는? ① 111cm² ② 116cm² ③ 121cm² ④ 126cm²

116. 가로 20cm, 세로 15cm인 직사각형의 넓이는? ① 280cm² ② 290cm² ③ 300cm² ④ 310cm²

117. 밑변 14cm, 높이 8cm인 삼각형의 넓이는? ① 52cm² ② 54cm² ③ 56cm² ④ 58cm²

118. 한 변이 6cm인 정육면체의 부피는? ① 200cm³ ② 208cm³ ③ 216cm³ ④ 224cm³

119. 반지름이 6cm인 원의 넓이는? (π=3.14) ① 111.06cm² ② 113.04cm² ③ 115.02cm² ④ 117.00cm²

120. 한 변이 13cm인 정사각형의 둘레는? ① 48cm ② 50cm ③ 52cm ④ 54cm

## 121-150: 백분율, 비율, 응용문제

121. 100의 30%는? ① 20 ② 25 ③ 30 ④ 35

122. 50의 50%는? ① 20 ② 25 ③ 30 ④ 35

123. 200의 25%는? ① 40 ② 45 ③ 50 ④ 55

124. 80의 75%는? ① 55 ② 60 ③ 65 ④ 70

125. 150의 20%는? ① 25 ② 30 ③ 35 ④ 40

126. 60의 40%는? ① 20 ② 22 ③ 24 ④ 26

127. 250의 10%는? ① 20 ② 25 ③ 30 ④ 35

128. 90의 60%는? ① 48 ② 52 ③ 54 ④ 56

129. 120의 35%는? ① 38 ② 40 ③ 42 ④ 44

130. 180의 15%는? ① 25 ② 27 ③ 29 ④ 31

131. 3:5에서 전항이 6이면 후항은? ① 8 ② 9 ③ 10 ④ 12

132. 4:7 = 12:x일 때, x는? ① 18 ② 19 ③ 20 ④ 21

133. 2:3 = x:15일 때, x는? ① 8 ② 9 ③ 10 ④ 12

134. 6:9를 가장 간단한 비로 나타내면? ① 1:2 ② 2:3 ③ 3:4 ④ 4:5

135. 12:18을 가장 간단한 비로 나타내면? ① 1:2 ② 2:3 ③ 3:4 ④ 4:5

136. 15:25 = 3:x일 때, x는? ① 3 ② 4 ③ 5 ④ 6

137. 10:15를 가장 간단한 비로 나타내면? ① 1:2 ② 2:3 ③ 3:4 ④ 4:5

138. 5, 8, 12의 평균은? ① 7 ② 8 ③ 8.3 ④ 9

139. 10, 20, 30, 40의 평균은? ① 20 ② 25 ③ 30 ④ 35

140. 2시간 30분은 몇 분? ① 120분 ② 130분 ③ 140분 ④ 150분

141. 180분은 몇 시간? ① 2시간 ② 3시간 ③ 4시간 ④ 5시간

142. 12와 18의 최대공약수는? ① 3 ② 4 ③ 6 ④ 9

143. 4와 6의 최소공배수는? ① 8 ② 10 ③ 12 ④ 24

144. 2, 4, 6, 8, ? 다음 수는? ① 9 ② 10 ③ 11 ④ 12

145. 5, 10, 15, 20, ? 다음 수는? ① 22 ② 24 ③ 25 ④ 30

146. 사과 3개의 가격이 6,000원일 때, 사과 5개의 가격은? ① 8,000원 ② 9,000원 ③ 10,000원 ④ 12,000원

147. 기차가 시속 60km로 3시간 동안 달렸다면, 간 거리는? ① 150km ② 160km ③ 170km ④ 180km

148. 24명의 학생을 6명씩 조를 만들면 몇 조가 되는가? ① 3조 ② 4조 ③ 5조 ④ 6조

149. 48 ÷ (4 + 2) = ? ① 6 ② 7 ③ 8 ④ 9

150. (15 + 25) × 2 = ? ① 70 ② 75 ③ 80 ④ 85`

// 제공된 답안 텍스트
const answersText = `# 초등학교 수학 문제 150개 (답안편)

## 1-30: 덧셈과 뺄셈

1. ② 42

2. ② 54

3. ② 694

4. ② 333

5. ② 6,912

6. ③ 105

7. ② 244

8. ② 165

9. ② 211

10. ② 690

11. ② 801

12. ② 822

13. ② 212

14. ② 267

15. ② 1,641

16. ② 1,211

17. ② 1,197

18. ② 2,655

19. ② 5,801

20. ② 4,544

21. ② 9,134

22. ② 999

23. ② 833

24. ② 1,419

25. ② 3,211

26. ② 7,777

27. ② 4,679

28. ② 3,333

29. ② 3,822

30. ② 9,999

## 31-60: 곱셈과 나눗셈

31. ② 56

32. ② 54

33. ③ 60

34. ③ 8

35. ② 7

36. ③ 60

37. ③ 9

38. ② 121

39. ③ 12

40. ③ 100

41. ③ 91

42. ③ 12

43. ② 51

44. ③ 12

45. ③ 95

46. ③ 138

47. ③ 15

48. ② 216

49. ③ 14

50. ③ 170

51. ③ 15

52. ② 405

53. ③ 12

54. ② 392

55. ③ 16

56. ② 536

57. ③ 16

58. ③ 84

59. ③ 12

60. ② 162

## 61-90: 분수와 소수

61. ③ 3/4

62. ② 2/5

63. ③ 1/2

64. ① 1/2

65. ② 2

66. ③ 7/8

67. ③ 1/2

68. ① 1/4

69. ② 2

70. ③ 1

71. ② 0.8

72. ③ 0.5

73. ② 2.0

74. ③ 0.5

75. ③ 6.2

76. ② 2.7

77. ③ 4.8

78. ③ 0.9

79. ② 4.0

80. ② 6.4

81. ④ 11/12

82. ③ 3/10

83. ② 6/21

84. ① 5/2

85. ③ 1.5

86. ③ 2.9

87. ② 6.0

88. ② 1.2

89. ③ 8.3

90. ③ 5/8

## 91-120: 도형과 측정

91. ② 20cm

92. ③ 40cm²

93. ② 12cm²

94. ② 14cm

95. ④ 12개

96. ③ 36cm²

97. ③ 60cm²

98. ② 20cm²

99. ③ 125cm³

100. ③ 24cm³

101. ③ 78.5cm²

102. ③ 32cm

103. ② 32cm

104. ③ 30cm

105. ② 62.8cm

106. ③ 49cm²

107. ③ 96cm²

108. ② 30cm²

109. ③ 64cm³

110. ③ 120cm³

111. ② 28.26cm²

112. ③ 36cm

113. ③ 50cm

114. ② 87.92cm

115. ③ 121cm²

116. ③ 300cm²

117. ③ 56cm²

118. ③ 216cm³

119. ② 113.04cm²

120. ③ 52cm

## 121-150: 백분율, 비율, 응용문제

121. ③ 30

122. ② 25

123. ③ 50

124. ② 60

125. ② 30

126. ③ 24

127. ② 25

128. ③ 54

129. ③ 42

130. ② 27

131. ③ 10

132. ④ 21

133. ③ 10

134. ② 2:3

135. ② 2:3

136. ③ 5

137. ② 2:3

138. ③ 8.3

139. ② 25

140. ④ 150분

141. ② 3시간

142. ③ 6

143. ③ 12

144. ② 10

145. ③ 25

146. ③ 10,000원

147. ④ 180km

148. ② 4조

149. ③ 8

150. ③ 80`

// 문제 파싱 및 저장 (답안 포함)
export const parsedProblems = parseProblemText(problemsText, answersText)

// 문제 ID로 문제 찾기
export function getProblemById(id: number): Problem | undefined {
  return parsedProblems.find(p => p.id === id)
}

// 모든 문제 가져오기
export function getAllProblems(): Problem[] {
  return parsedProblems
}
